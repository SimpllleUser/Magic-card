import{M as se,a as ie}from"./modals-C4dAcI15.js";import{v as ce,A as de,ai as me,L as ve,R as pe,M as fe,a0 as ge,c as g,r as Q,aj as ye,ak as G,al as he,a9 as _e,am as xe,b as v,F as Y,m as N,an as we,ao as H,d as D,o as S,a as j,w as C,f as A,j as Ie,ap as Qe,aq as Ve,u as c,t as K,C as k,ar as be,h as T,g as B,P as Ce,ah as F,I as Z,q as P,s as Se,V as J,i as ae,as as qe,a6 as Ae,at as ke}from"./index-20hxo3DR.js";import{_ as Fe}from"./BaseModal.vue_vue_type_script_setup_true_lang-B0Qh8Zv6.js";import{a as Re,B as ze}from"./constants-SS_I6HHF.js";import{m as Pe,d as De,u as We,e as Oe,f as $e,g as Le}from"./VSelect-CEzDh_Fk.js";import{f as Te,e as ee}from"./forwardRefs-DwILkz7f.js";import{Q as z,u as Be}from"./quiz-B7R4xM_n.js";import{W as Ue}from"./WordSlider-BrcTK3tR.js";import"./dialog-transition-A8tAnO8O.js";const Ee=ce({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...de(),...Pe(),...me(De({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),je=ve()({name:"VOtpInput",props:Ee(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:l,emit:a,slots:s}=t;const{dimensionStyles:n}=pe(e),{isFocused:d,focus:o,blur:p}=We(e),r=fe(e,"modelValue","",u=>u==null?[]:String(u).split(""),u=>u.join("")),{t:_}=ge(),x=g(()=>Number(e.length)),R=g(()=>Array(x.value).fill(0)),i=Q(-1),q=Q(),w=Q([]),m=g(()=>w.value[i.value]);function I(){if(X(m.value.value)){m.value.value="";return}const u=r.value.slice(),f=m.value.value;u[i.value]=f;let V=null;i.value>r.value.length?V=r.value.length+1:i.value+1!==x.value&&(V="next"),r.value=u,V&&H(q.value,V)}function W(u){const f=r.value.slice(),V=i.value;let b=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(u.key)&&(u.preventDefault(),u.key==="ArrowLeft"?b="prev":u.key==="ArrowRight"?b="next":["Backspace","Delete"].includes(u.key)&&(f[i.value]="",r.value=f,i.value>0&&u.key==="Backspace"?b="prev":requestAnimationFrame(()=>{var h;(h=w.value[V])==null||h.select()})),requestAnimationFrame(()=>{b!=null&&H(q.value,b)}))}function O(u,f){var b,h;f.preventDefault(),f.stopPropagation();const V=((b=f==null?void 0:f.clipboardData)==null?void 0:b.getData("Text").slice(0,x.value))??"";X(V)||(r.value=V.split(""),(h=w.value)==null||h[u].blur())}function ue(){r.value=[]}function le(u,f){o(),i.value=f}function re(){p(),i.value=-1}function X(u){return e.type==="number"&&/[^0-9]/g.test(u)}return ye({VField:{color:g(()=>e.color),bgColor:g(()=>e.color),baseColor:g(()=>e.baseColor),disabled:g(()=>e.disabled),error:g(()=>e.error),variant:g(()=>e.variant)}},{scoped:!0}),G(r,u=>{u.length===x.value&&a("finish",u.join(""))},{deep:!0}),G(i,u=>{u<0||he(()=>{var f;(f=w.value[u])==null||f.select()})}),_e(()=>{var V;const[u,f]=xe(l);return v("div",N({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},u),[v("div",{ref:q,class:"v-otp-input__content",style:[n.value]},[R.value.map((b,h)=>v(Y,null,[e.divider&&h!==0&&v("span",{class:"v-otp-input__divider"},[e.divider]),v(Oe,{focused:d.value&&e.focusAll||i.value===h,key:h},{...s,loader:void 0,default:()=>v("input",{ref:$=>w.value[h]=$,"aria-label":_(e.label,h+1),autofocus:h===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:r.value[h],onInput:I,onFocus:$=>le($,h),onBlur:re,onKeydown:W,onPaste:$=>O(h,$)},null)})])),v("input",N({class:"v-otp-input-input",type:"hidden"},f,{value:r.value.join("")}),null),v(Te,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var b;return[((b=s.loader)==null?void 0:b.call(s))??v(we,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(V=s.default)==null?void 0:V.call(s)])])}),{blur:()=>{var u;(u=w.value)==null||u.some(f=>f.blur())},focus:()=>{var u;(u=w.value)==null||u[0].focus()},reset:ue,isFocused:d}}});let U;const Me=new Uint8Array(16);function Ne(){if(!U&&(U=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!U))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return U(Me)}const y=[];for(let e=0;e<256;++e)y.push((e+256).toString(16).slice(1));function Ye(e,t=0){return y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]}const Ke=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),te={randomUUID:Ke};function ne(e,t,l){if(te.randomUUID&&!t&&!e)return te.randomUUID();e=e||{};const a=e.random||(e.rng||Ne)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Ye(a)}const Xe={class:"ml-4"},Ge={class:"total d-flex justify-center"},He={class:"total d-flex justify-center pt-4"},Ze=D({__name:"QuizResult",props:{moduleId:{},questions:{default:()=>[]}},emits:["retry"],setup(e,{emit:t}){const l=e,a=t,s=(r,_)=>{const x=F.omit(r,"answerId");return{...x,number:_+1,answer:x.answer||"-"}},n=r=>r?{icon:Z.Check,color:k.Success}:{icon:Z.Close,color:k.Error},d=g(()=>l.questions.filter(r=>r.isCorrect).length),o=g(()=>`${d.value}/${l.questions.length}`),p=r=>{a("retry"),r&&r()};return(r,_)=>(S(),j(Fe,{id:c(se).FinishQuiz,title:"Result of quiz!"},{default:C(({hide:x})=>[A("div",null,[v(ze,{data:l.questions,"header-sticky":"",height:"20rem","hide-footer":"",keys:c(Re),"map-item":s},{"item.isCorrect":C(({value:R})=>[A("div",Xe,[v(Ie,Qe(Ve(n(R))),null,16)])]),_:1},8,["data","keys"]),v($e,{class:"border-opacity-25 my-2"}),A("div",Ge,[A("div",null,[v(be,{class:"ma-2",color:c(k).Primary,label:""},{default:C(()=>[A("b",null,K(c(o)),1)]),_:1},8,["color"])])]),A("div",He,[v(B,{color:c(k).Primary,onClick:R=>p(x)},{default:C(()=>_[0]||(_[0]=[T("Try again")])),_:2},1032,["color","onClick"]),v(B,{class:"ml-4",color:c(k).Secondary,to:{name:c(Ce).DictionaryDetail,params:{id:r.moduleId}}},{default:C(()=>_[1]||(_[1]=[T(" Go to the module ")])),_:1},8,["color","to"])])])]),_:1},8,["id"]))}}),Je=D({__name:"SelectWord",props:{actualQuestion:{},actualVariants:{}},emits:["set-answer"],setup(e,{emit:t}){const l=e,a=t,s=n=>l.actualQuestion.answerId===n;return(n,d)=>(S(),P("div",null,[(S(!0),P(Y,null,Se(n.actualVariants,(o,p)=>(S(),j(B,{key:p,class:"mx-1 bg-surface-variant:",color:s(o.id)?c(k).Accent:c(k).SurfaceVariantText,variant:s(o.id)?c(J).Flat:c(J).Outlined,onClick:r=>a("set-answer",{question:n.actualQuestion,answer:o})},{default:C(()=>[T(K(o.to),1)]),_:2},1032,["color","variant","onClick"]))),128))]))}}),et=D({__name:"InputLetters",props:{actualQuestion:{},actualVariants:{}},emits:["setAnswer"],setup(e){var a;const l=Q(((a=e.actualQuestion)==null?void 0:a.answer)||"");return(s,n)=>{var d,o;return S(),P("div",null,[v(je,{modelValue:c(l),"onUpdate:modelValue":[n[0]||(n[0]=p=>ae(l)?l.value=p:null),n[1]||(n[1]=p=>s.$emit("setAnswer",{question:s.actualQuestion,value:p}))],length:(d=s.actualQuestion)==null?void 0:d.from.length,"min-width":((o=s.actualQuestion)==null?void 0:o.from.length)*50,type:"text"},null,8,["modelValue","length","min-width"])])}}}),tt={class:"w-50"},nt=D({__name:"InputWord",props:{actualQuestion:{}},emits:["setAnswer"],setup(e){var a;const l=Q(((a=e.actualQuestion)==null?void 0:a.answer)||"");return(s,n)=>(S(),P("div",tt,[v(Le,{modelValue:c(l),"onUpdate:modelValue":[n[0]||(n[0]=d=>ae(l)?l.value=d:null),n[1]||(n[1]=d=>s.$emit("setAnswer",{question:s.actualQuestion,value:d}))],maxlength:"120",type:"text"},null,8,["modelValue"])]))}}),st=e=>{if(e.length<4)return e;const t=e.length<=7?2:e.length<=10?3:2,l=e.length>10?1:0;return e.split("").map((a,s)=>(s+l)%t===0?" ":a).join("")};function oe(e){const l=(i=>()=>F.shuffle(i))(e),a=()=>l().map(i=>({...i,isCorrect:!1,from:i.from.trimStart().trimEnd(),answer:st(i.from.trimStart().trimEnd())})),s=Q(a()),n=Q(0),d=g(()=>s.value[n.value]),o=i=>{n.value=i||0};return{next:()=>{const i=n.value===s.value.length-1?0:n.value+1;o(i)},prev:()=>{const i=n.value===0?s.value.length-1:n.value-1;o(i)},setAnswer:({question:i,value:q})=>{var w;s.value[n.value]={...i,isCorrect:((w=i.from)==null?void 0:w.trim())===q,answer:q}},reset:()=>{s.value=a(),n.value=0},getQuestion:i=>F.upperFirst(i.to),actualQuestionIndex:n,actualQuestion:d,questions:s}}function at(e){const t=oe(e),l=o=>({...o,answer:""}),a=Q(F.shuffle(t.questions.value.map(l))),s=()=>{a.value=F.shuffle(t.questions.value.map(l)),t.actualQuestionIndex.value=0},n=g(()=>a.value[t.actualQuestionIndex.value]);return{...t,questions:a,actualQuestion:n,setAnswer:({question:o,value:p})=>{var r;a.value[t.actualQuestionIndex.value]={...o,isCorrect:((r=o.from)==null?void 0:r.trim())===p,answer:p}},reset:s}}function ot(e){const l=(m=>()=>F.shuffle(m))(e),a=m=>m.map(I=>{const W=F.shuffle(n.value.filter(({id:O})=>O!==I.id)).slice(0,3);return F.shuffle([I,...W])}),s=()=>l().map(m=>({...m,isCorrect:!1,answerId:null,answer:null})),n=Q(s()),d=Q(a(n.value)),o=Q(0),p=g(()=>n.value[o.value]),r=g(()=>d.value[o.value]),_=m=>{o.value=m||0};return{next:()=>{const m=o.value===n.value.length-1?0:o.value+1;_(m)},prev:()=>{const m=o.value===0?n.value.length-1:o.value-1;_(m)},setAnswer:({question:m,answer:I})=>{n.value[o.value]={...m,isCorrect:m.to===I.to,answerId:I.id,answer:I.to}},reset:()=>{n.value=s(),d.value=a(n.value),o.value=0},getQuestion:m=>F.upperFirst(m.from.trimStart()),actualQuestionIndex:o,actualQuestion:p,variantsOfQuestions:d,actualVariants:r,questions:n}}const ut={[z.SelectWord]:Je,[z.InputLetters]:et,[z.InputWord]:nt},lt={[z.SelectWord]:ot,[z.InputLetters]:oe,[z.InputWord]:at};function rt(e){const t=g(()=>ut[e]),l=g(()=>lt[e]);return{quizComponent:t,quizLogic:l}}var L=(e=>(e.Xs="xs",e.Sm="sm",e.Md="md",e.Lg="lg",e.Xl="xl",e))(L||{});const E=qe({xs:0,sm:600,md:960,lg:1264,xl:1904}),M=g(()=>E.xl.value?"xl":E.lg.value?"lg":E.md.value?"md":E.sm.value?"sm":"xs"),it={class:"text-h3 font-weight-bold"},ct={class:"d-flex justify-center pt-12"},dt=D({__name:"DynamicQuiz",props:{questions:{default:()=>[]},quizType:{default:z.SelectWord}},emits:["finished"],setup(e,{emit:t}){const l=e,a=t,{quizComponent:s,quizLogic:n}=rt(l.quizType),{actualQuestionIndex:d,setAnswer:o,reset:p,getQuestion:r,actualQuestion:_,questions:x,actualVariants:R}=n.value([...l.questions]),i=()=>{a("finished",x.value),p()},q=m=>{d.value=m},w=g(()=>({"w-50":M.value===L.Xl,"w-75":M.value===L.Lg,"w-100":[L.Md,L.Sm].includes(M.value)}));return(m,I)=>(S(),P(Y,null,[A("div",{class:Ae(["mx-auto",w.value])},[v(Ue,{words:c(x),onChangeSlide:q},{default:C(({word:W,index:O})=>[v(ee,{class:"d-flex justify-center"},{default:C(()=>[A("div",it,K(c(r)(W)),1)]),_:2},1024),v(ee,{class:"d-flex justify-center",style:{"margin-top":"6rem"}},{default:C(()=>[(S(),j(ke(c(s)),N({key:O,"actual-question":c(_)},{actualVariants:c(R)||[]},{onSetAnswer:c(o)}),null,16,["actual-question","onSetAnswer"]))]),_:2},1024)]),_:1},8,["words"])],2),A("div",ct,[v(B,{class:"mr-4",color:c(k).Primary,onClick:c(p)},{default:C(()=>I[0]||(I[0]=[T("Restart")])),_:1},8,["color","onClick"]),v(B,{color:c(k).Primary,onClick:i},{default:C(()=>I[1]||(I[1]=[T("Finish")])),_:1},8,["color"])])],64))}}),mt={class:"py-4"},It=D({__name:"QuizePage",setup(e){const t=Be(),l=ie(),a=Q([]),s=o=>{a.value=o,l.show(se.FinishQuiz)},n=Q(ne()),d=()=>{n.value=ne()};return(o,p)=>(S(),P("div",mt,[v(Ze,{"module-id":c(t).activeModuleId,questions:c(a),onRetry:d},null,8,["module-id","questions"]),(S(),j(dt,{key:c(n),questions:c(t).words,"quiz-type":c(t).currentType,onFinished:s},null,8,["questions","quiz-type"]))]))}});export{It as default};
