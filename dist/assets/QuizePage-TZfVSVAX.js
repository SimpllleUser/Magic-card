import{M as se,a as ie}from"./modals-qeSk08hH.js";import{l as F,f as ce,e as X}from"./forwardRefs-CIt-ZFAF.js";import{_ as de}from"./BaseModal.vue_vue_type_script_setup_true_lang-DTSPD0ay.js";import{d as D,c as g,o as S,a as j,w as C,f as q,b as v,j as me,ag as ve,ah as pe,u as c,t as Y,C as A,h as B,g as L,P as fe,I as G,l as P,F as K,n as ge,V as J,p as ye,x as he,ai as xe,H as _e,N as we,J as Ie,Y as Qe,r as Q,aj as Ve,ak as Z,al as be,a6 as Ce,am as Se,m as M,an as ke,ao as ee,i as ae,ap as qe,a3 as Ae,aq as Fe}from"./index-D1UXgAv0.js";import{a as Re,B as ze}from"./constants-ByVFYk6x.js";import{d as Pe,e as De,m as We,f as Oe,u as $e,g as Te,h as Be}from"./VSelect-LPuysnI-.js";import{Q as z,u as Le}from"./quiz-hA7E1A43.js";import{W as Ue}from"./WordSlider-CS00BjTU.js";import"./dialog-transition-C4emrXIy.js";let U;const Ee=new Uint8Array(16);function je(){if(!U&&(U=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!U))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return U(Ee)}const y=[];for(let e=0;e<256;++e)y.push((e+256).toString(16).slice(1));function Ne(e,t=0){return y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]}const Me=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),te={randomUUID:Me};function ne(e,t,l){if(te.randomUUID&&!t&&!e)return te.randomUUID();e=e||{};const a=e.random||(e.rng||je)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Ne(a)}const Ye={class:"ml-4"},Ke={class:"total d-flex justify-center"},He={class:"total d-flex justify-center pt-4"},Xe=D({__name:"QuizResult",props:{moduleId:{},questions:{default:()=>[]}},emits:["retry"],setup(e,{emit:t}){const l=e,a=t,s=(r,x)=>{const _=F.omit(r,"answerId");return{..._,number:x+1,answer:_.answer||"-"}},n=r=>r?{icon:G.Check,color:A.Success}:{icon:G.Close,color:A.Error},d=g(()=>l.questions.filter(r=>r.isCorrect).length),o=g(()=>`${d.value}/${l.questions.length}`),p=r=>{a("retry"),r&&r()};return(r,x)=>(S(),j(de,{id:c(se).FinishQuiz,title:"Result of quiz!"},{default:C(({hide:_})=>[q("div",null,[v(ze,{data:l.questions,"header-sticky":"",height:"20rem","hide-footer":"",keys:c(Re),"map-item":s},{"item.isCorrect":C(({value:R})=>[q("div",Ye,[v(me,ve(pe(n(R))),null,16)])]),_:1},8,["data","keys"]),v(Pe,{class:"border-opacity-25 my-2"}),q("div",Ke,[q("div",null,[v(De,{class:"ma-2",color:c(A).Primary,label:""},{default:C(()=>[q("b",null,Y(c(o)),1)]),_:1},8,["color"])])]),q("div",He,[v(L,{color:c(A).Primary,onClick:R=>p(_)},{default:C(()=>x[0]||(x[0]=[B("Try again")])),_:2},1032,["color","onClick"]),v(L,{class:"ml-4",color:c(A).Secondary,to:{name:c(fe).DictionaryDetail,params:{id:r.moduleId}}},{default:C(()=>x[1]||(x[1]=[B(" Go to the module ")])),_:1},8,["color","to"])])])]),_:1},8,["id"]))}}),Ge=D({__name:"SelectWord",props:{actualQuestion:{},actualVariants:{}},emits:["set-answer"],setup(e,{emit:t}){const l=e,a=t,s=n=>l.actualQuestion.answerId===n;return(n,d)=>(S(),P("div",null,[(S(!0),P(K,null,ge(n.actualVariants,(o,p)=>(S(),j(L,{key:p,class:"mx-1 bg-surface-variant:",color:s(o.id)?c(A).Accent:c(A).SurfaceVariantText,variant:s(o.id)?c(J).Flat:c(J).Outlined,onClick:r=>a("set-answer",{question:n.actualQuestion,answer:o})},{default:C(()=>[B(Y(o.to),1)]),_:2},1032,["color","variant","onClick"]))),128))]))}}),Je=ye({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...he(),...We(),...xe(Oe({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Ze=_e()({name:"VOtpInput",props:Je(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:l,emit:a,slots:s}=t;const{dimensionStyles:n}=we(e),{isFocused:d,focus:o,blur:p}=$e(e),r=Ie(e,"modelValue","",u=>u==null?[]:String(u).split(""),u=>u.join("")),{t:x}=Qe(),_=g(()=>Number(e.length)),R=g(()=>Array(_.value).fill(0)),i=Q(-1),k=Q(),w=Q([]),m=g(()=>w.value[i.value]);function I(){if(H(m.value.value)){m.value.value="";return}const u=r.value.slice(),f=m.value.value;u[i.value]=f;let V=null;i.value>r.value.length?V=r.value.length+1:i.value+1!==_.value&&(V="next"),r.value=u,V&&ee(k.value,V)}function W(u){const f=r.value.slice(),V=i.value;let b=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(u.key)&&(u.preventDefault(),u.key==="ArrowLeft"?b="prev":u.key==="ArrowRight"?b="next":["Backspace","Delete"].includes(u.key)&&(f[i.value]="",r.value=f,i.value>0&&u.key==="Backspace"?b="prev":requestAnimationFrame(()=>{var h;(h=w.value[V])==null||h.select()})),requestAnimationFrame(()=>{b!=null&&ee(k.value,b)}))}function O(u,f){var b,h;f.preventDefault(),f.stopPropagation();const V=((b=f==null?void 0:f.clipboardData)==null?void 0:b.getData("Text").slice(0,_.value))??"";H(V)||(r.value=V.split(""),(h=w.value)==null||h[u].blur())}function ue(){r.value=[]}function le(u,f){o(),i.value=f}function re(){p(),i.value=-1}function H(u){return e.type==="number"&&/[^0-9]/g.test(u)}return Ve({VField:{color:g(()=>e.color),bgColor:g(()=>e.color),baseColor:g(()=>e.baseColor),disabled:g(()=>e.disabled),error:g(()=>e.error),variant:g(()=>e.variant)}},{scoped:!0}),Z(r,u=>{u.length===_.value&&a("finish",u.join(""))},{deep:!0}),Z(i,u=>{u<0||be(()=>{var f;(f=w.value[u])==null||f.select()})}),Ce(()=>{var V;const[u,f]=Se(l);return v("div",M({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},u),[v("div",{ref:k,class:"v-otp-input__content",style:[n.value]},[R.value.map((b,h)=>v(K,null,[e.divider&&h!==0&&v("span",{class:"v-otp-input__divider"},[e.divider]),v(Te,{focused:d.value&&e.focusAll||i.value===h,key:h},{...s,loader:void 0,default:()=>v("input",{ref:$=>w.value[h]=$,"aria-label":x(e.label,h+1),autofocus:h===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:r.value[h],onInput:I,onFocus:$=>le($,h),onBlur:re,onKeydown:W,onPaste:$=>O(h,$)},null)})])),v("input",M({class:"v-otp-input-input",type:"hidden"},f,{value:r.value.join("")}),null),v(ce,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var b;return[((b=s.loader)==null?void 0:b.call(s))??v(ke,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(V=s.default)==null?void 0:V.call(s)])])}),{blur:()=>{var u;(u=w.value)==null||u.some(f=>f.blur())},focus:()=>{var u;(u=w.value)==null||u[0].focus()},reset:ue,isFocused:d}}}),et=D({__name:"InputLetters",props:{actualQuestion:{},actualVariants:{}},emits:["setAnswer"],setup(e){var a;const l=Q(((a=e.actualQuestion)==null?void 0:a.answer)||"");return(s,n)=>{var d,o;return S(),P("div",null,[v(Ze,{modelValue:c(l),"onUpdate:modelValue":[n[0]||(n[0]=p=>ae(l)?l.value=p:null),n[1]||(n[1]=p=>s.$emit("setAnswer",{question:s.actualQuestion,value:p}))],length:(d=s.actualQuestion)==null?void 0:d.from.length,"min-width":((o=s.actualQuestion)==null?void 0:o.from.length)*50,type:"text"},null,8,["modelValue","length","min-width"])])}}}),tt={class:"w-50"},nt=D({__name:"InputWord",props:{actualQuestion:{}},emits:["setAnswer"],setup(e){var a;const l=Q(((a=e.actualQuestion)==null?void 0:a.answer)||"");return(s,n)=>(S(),P("div",tt,[v(Be,{modelValue:c(l),"onUpdate:modelValue":[n[0]||(n[0]=d=>ae(l)?l.value=d:null),n[1]||(n[1]=d=>s.$emit("setAnswer",{question:s.actualQuestion,value:d}))],maxlength:"120",type:"text"},null,8,["modelValue"])]))}}),st=e=>{if(e.length<4)return e;const t=e.length<=7?2:e.length<=10?3:2,l=e.length>10?1:0;return e.split("").map((a,s)=>(s+l)%t===0?" ":a).join("")};function oe(e){const l=(i=>()=>F.shuffle(i))(e),a=()=>l().map(i=>({...i,isCorrect:!1,from:i.from.trimStart().trimEnd(),answer:st(i.from.trimStart().trimEnd())})),s=Q(a()),n=Q(0),d=g(()=>s.value[n.value]),o=i=>{n.value=i||0};return{next:()=>{const i=n.value===s.value.length-1?0:n.value+1;o(i)},prev:()=>{const i=n.value===0?s.value.length-1:n.value-1;o(i)},setAnswer:({question:i,value:k})=>{var w;s.value[n.value]={...i,isCorrect:((w=i.from)==null?void 0:w.trim())===k,answer:k}},reset:()=>{s.value=a(),n.value=0},getQuestion:i=>F.upperFirst(i.to),actualQuestionIndex:n,actualQuestion:d,questions:s}}function at(e){const t=oe(e),l=o=>({...o,answer:""}),a=Q(F.shuffle(t.questions.value.map(l))),s=()=>{a.value=F.shuffle(t.questions.value.map(l)),t.actualQuestionIndex.value=0},n=g(()=>a.value[t.actualQuestionIndex.value]);return{...t,questions:a,actualQuestion:n,setAnswer:({question:o,value:p})=>{var r;a.value[t.actualQuestionIndex.value]={...o,isCorrect:((r=o.from)==null?void 0:r.trim())===p,answer:p}},reset:s}}function ot(e){const l=(m=>()=>F.shuffle(m))(e),a=m=>m.map(I=>{const W=F.shuffle(n.value.filter(({id:O})=>O!==I.id)).slice(0,3);return F.shuffle([I,...W])}),s=()=>l().map(m=>({...m,isCorrect:!1,answerId:null,answer:null})),n=Q(s()),d=Q(a(n.value)),o=Q(0),p=g(()=>n.value[o.value]),r=g(()=>d.value[o.value]),x=m=>{o.value=m||0};return{next:()=>{const m=o.value===n.value.length-1?0:o.value+1;x(m)},prev:()=>{const m=o.value===0?n.value.length-1:o.value-1;x(m)},setAnswer:({question:m,answer:I})=>{n.value[o.value]={...m,isCorrect:m.to===I.to,answerId:I.id,answer:I.to}},reset:()=>{n.value=s(),d.value=a(n.value),o.value=0},getQuestion:m=>F.upperFirst(m.from.trimStart()),actualQuestionIndex:o,actualQuestion:p,variantsOfQuestions:d,actualVariants:r,questions:n}}const ut={[z.SelectWord]:Ge,[z.InputLetters]:et,[z.InputWord]:nt},lt={[z.SelectWord]:ot,[z.InputLetters]:oe,[z.InputWord]:at};function rt(e){const t=g(()=>ut[e]),l=g(()=>lt[e]);return{quizComponent:t,quizLogic:l}}var T=(e=>(e.Xs="xs",e.Sm="sm",e.Md="md",e.Lg="lg",e.Xl="xl",e))(T||{});const E=qe({xs:0,sm:600,md:960,lg:1264,xl:1904}),N=g(()=>E.xl.value?"xl":E.lg.value?"lg":E.md.value?"md":E.sm.value?"sm":"xs"),it={class:"text-h3 font-weight-bold"},ct={class:"d-flex justify-center pt-12"},dt=D({__name:"DynamicQuiz",props:{questions:{default:()=>[]},quizType:{default:z.SelectWord}},emits:["finished"],setup(e,{emit:t}){const l=e,a=t,{quizComponent:s,quizLogic:n}=rt(l.quizType),{actualQuestionIndex:d,setAnswer:o,reset:p,getQuestion:r,actualQuestion:x,questions:_,actualVariants:R}=n.value([...l.questions]),i=()=>{a("finished",_.value),p()},k=m=>{d.value=m},w=g(()=>({"w-50":N.value===T.Xl,"w-75":N.value===T.Lg,"w-100":[T.Md,T.Sm].includes(N.value)}));return(m,I)=>(S(),P(K,null,[q("div",{class:Ae(["mx-auto",w.value])},[v(Ue,{words:c(_),onChangeSlide:k},{default:C(({word:W,index:O})=>[v(X,{class:"d-flex justify-center"},{default:C(()=>[q("div",it,Y(c(r)(W)),1)]),_:2},1024),v(X,{class:"d-flex justify-center",style:{"margin-top":"6rem"}},{default:C(()=>[(S(),j(Fe(c(s)),M({key:O,"actual-question":c(x)},{actualVariants:c(R)||[]},{onSetAnswer:c(o)}),null,16,["actual-question","onSetAnswer"]))]),_:2},1024)]),_:1},8,["words"])],2),q("div",ct,[v(L,{class:"mr-4",color:c(A).Primary,onClick:c(p)},{default:C(()=>I[0]||(I[0]=[B("Restart")])),_:1},8,["color","onClick"]),v(L,{color:c(A).Primary,onClick:i},{default:C(()=>I[1]||(I[1]=[B("Finish")])),_:1},8,["color"])])],64))}}),mt={class:"py-4"},It=D({__name:"QuizePage",setup(e){const t=Le(),l=ie(),a=Q([]),s=o=>{a.value=o,l.show(se.FinishQuiz)},n=Q(ne()),d=()=>{n.value=ne()};return(o,p)=>(S(),P("div",mt,[v(Xe,{"module-id":c(t).activeModuleId,questions:c(a),onRetry:d},null,8,["module-id","questions"]),(S(),j(dt,{key:c(n),questions:c(t).words,"quiz-type":c(t).currentType,onFinished:s},null,8,["questions","quiz-type"]))]))}});export{It as default};
